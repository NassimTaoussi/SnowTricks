{% extends 'base.html.twig' %}

{% block title %}Modifier le {{ trick.name }}{% endblock %}

{% block body %}

<main class="pt-5 min-vh-100">
    <div class="container bg-white h-100 shadow rounded mb-5">

        <div class="row no-gutters h-100">
            {{ form_start(form) }}
            {{ form_widget(form._token) }}

            {{ form_errors(form) }}
            <div id="coverEdit" class="col-12 position-relative ratio ratio-16x9">
                <img src="{{ asset("uploads/" ~ trick.cover.name) }}" alt="" class="rounded-top ratio ratio-16x9 z-1 w-100 position-absolute top-0 left-0">
                <h1 class="z-2 m-0 flex-shrink-0  d-flex justify-content-center align-items-center">{{trick.name}}</h1>
                {#{{ form_label(form.avatar, 'SÃ©lectionnez une image', ) }}
                {{ form_widget(form.avatar) }}#}
            </div>

        </div>
    

        <div id="photosEdit" class="row d-flex justify-content-center mt-4">

            <div class="col-6 d-flex justify-content-start">
                {#<button type="button" class="btn btn-primary btn-new  mt-4" data-collection="#photos">Nouvelle photo</button>#}
                <div 
                    id="photos"
                    class="row d-flex justify-content-center"
                    data-prototype="{{ include("trick/_photo.html.twig", {form: form.photos.vars.prototype})|e("html_attr") }}" 
                    data-index="{{ form.photos|length > 0 ? form.photos|last.vars.name + 1 : 0}}">

                    {% for photo in form.photos %}
                        <div class="col-4">
                            {{ include("trick/_photo.html.twig", {form: photo}) }}
                        </div>
                    {% endfor %}
                </div>
                {{ form_errors(form.photos) }}
            </div>

            <div class="col-6 d-flex justify-content-start">
                {#<button type="button" class="btn btn-primary btn-new mt-4" data-collection="#videos">Nouvelle video</button>#}
                <div 
                    id="videos" 
                    class="row d-flex justify-content-center"
                    data-prototype="{{ include("trick/_video.html.twig", {form: form.videos.vars.prototype})|e("html_attr") }}" 
                    data-index="{{ form.videos|length > 0 ? form.videos|last.vars.name + 1 : 0}}">

                    {% for video in form.videos %}
                        <div class="col-4">
                            {{ include("trick/_video.html.twig", {form: video}) }}
                        </div>
                    {% endfor %}
                </div>
                {{ form_errors(form.videos) }}
            </div>

        </div>
 

        <div class="row d-flex justify-content-center mt-4">
            <div class="col-6">
                {{ form_row(form.name) }}</br>
            </div>
        </div>

        <div class="row d-flex justify-content-center mt-4">
            <div class="col-6">
                {{ form_row(form.description) }}</br>
            </div>
        </div>

        <div class="row d-flex justify-content-center mt-2">
            <div class="col-6">
                {{ form_row(form.category) }}</br>
            </div>
        </div>

        <div class="row d-flex justify-content-center mt-2 mb-5">
            <div class="col-6 mb-5">
                <button class="btn btn-success mt-4">Valider</button>
            </div>
        </div>
        
        {{ form_end(form, {render_rest: false}) }}

    </div>
</main>

{% endblock %}