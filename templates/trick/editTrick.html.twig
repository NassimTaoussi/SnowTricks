{% extends 'base.html.twig' %}

{% block title %}Modifier un trick{% endblock %}

{% block body %}
    <div class="row d-flex justify-content-center">
        <div class="col-12 d-flex justify-content-center text-center">
            {{ form_start(form) }}
                {{ form_widget(form._token) }}

                {{ form_errors(form) }}

                {{ form_label(form.name, null, {'label_attr': {'class': 'mt-5'}}) }}</br>
                {{ form_widget(form.name, {'attr': {'class': 'mt-1'}}) }}</br>

                {{ form_label(form.description, null, {'label_attr': {'class': 'mt-3'}}) }}</br>
                {{ form_widget(form.description, {'attr': {'class': 'mt-1'}}) }}</br>

                {{ form_label(form.category, null, {'label_attr': {'class': 'mt-3'}}) }}</br>
                {{ form_widget(form.category, {'attr': {'class': 'mt-1'}}) }}</br>

                <button type="button" class="btn btn-primary btn-new  mt-4" data-collection="#photos">Nouvelle photo</button>
                <div 
                    id="photos"
                    class="row"
                    data-prototype="{{ include("trick/_photo.html.twig", {form: form.photos.vars.prototype})|e("html_attr") }}" 
                    data-index="{{ form.photos|length > 0 ? form.photos|last.vars.name + 1 : 0}}">

                    {% for photo in form.photos %}
                        <div class="col-4">
                            {{ include("trick/_photo.html.twig", {form: photo}) }}
                        </div>
                    {% endfor %}
                </div>
                {{ form_errors(form.photos) }}

                <button type="button" class="btn btn-primary btn-new mt-4" data-collection="#videos">Nouvelle video</button>
                <div 
                    id="videos" 
                    class="row"
                    data-prototype="{{ include("trick/_video.html.twig", {form: form.videos.vars.prototype})|e("html_attr") }}" 
                    data-index="{{ form.videos|length > 0 ? form.videos|last.vars.name + 1 : 0}}">

                    {% for video in form.videos %}
                        <div class="col-4">
                            {{ include("trick/_video.html.twig", {form: video}) }}
                        </div>
                    {% endfor %}
                </div>
                {{ form_errors(form.videos) }}

            <button class="btn btn-success mt-4">Valider</button>
            {{ form_end(form, {render_rest: false}) }}
        </div>
    </div>
{% endblock %}